"use strict";(globalThis.webpackChunk_stlite_desktop=globalThis.webpackChunk_stlite_desktop||[]).push([[9915],{59915:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var s=i(5057),o=i(61839),r=i(98209),a=i(18950),l=i(4337),n=i(89401),d=i(46434),p=i(96266);class m extends s.PureComponent{constructor(...e){super(...e),this.formClearHelper=new r.Kz,this.state={value:this.initialValue},this.commitWidgetValue=e=>{this.props.widgetMgr.setStringValue(this.props.element,this.state.value,e)},this.onFormCleared=()=>{this.setState(((e,t)=>({value:t.element.default})),(()=>this.commitWidgetValue({fromUi:!0})))},this.handleChange=e=>{let t;t=null===e?this.initialValue:this.dateToString(e),this.setState({value:t},(()=>this.commitWidgetValue({fromUi:!0})))},this.stringToDate=e=>{const[t,i]=e.split(":").map(Number),s=new Date;return s.setHours(t),s.setMinutes(i),s},this.dateToString=e=>`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}get initialValue(){const e=this.props.widgetMgr.getStringValue(this.props.element);return void 0!==e?e:this.props.element.default}componentDidMount(){this.props.element.setValue?this.updateFromProtobuf():this.commitWidgetValue({fromUi:!1})}componentDidUpdate(){this.maybeUpdateFromProtobuf()}componentWillUnmount(){this.formClearHelper.disconnect()}maybeUpdateFromProtobuf(){const{setValue:e}=this.props.element;e&&this.updateFromProtobuf()}updateFromProtobuf(){const{value:e}=this.props.element;this.props.element.setValue=!1,this.setState({value:e},(()=>{this.commitWidgetValue({fromUi:!1})}))}render(){var e;const{disabled:t,width:i,element:s,widgetMgr:r}=this.props,m={width:i},h={Select:{props:{disabled:t,overrides:{ControlContainer:{style:{borderLeftWidth:"1px",borderRightWidth:"1px",borderTopWidth:"1px",borderBottomWidth:"1px"}},IconsContainer:{style:()=>({paddingRight:".5rem"})},ValueContainer:{style:()=>({paddingRight:".5rem",paddingLeft:".5rem",paddingBottom:".5rem",paddingTop:".5rem"})},SingleValue:{props:{className:"stTimeInput-timeDisplay"}},Dropdown:{style:()=>({paddingTop:0,paddingBottom:0})},Popover:{props:{overrides:{Body:{style:()=>({marginTop:"1px"})}}}}}}}};return this.formClearHelper.manageFormClearListener(r,s.formId,this.onFormCleared),(0,p.jsxs)("div",{className:"stTimeInput",style:m,children:[(0,p.jsx)(a.ON,{label:s.label,disabled:t,labelVisibility:(0,d.iF)(null===(e=s.labelVisibility)||void 0===e?void 0:e.value),children:s.help&&(0,p.jsx)(a.dT,{children:(0,p.jsx)(l.ZP,{content:s.help,placement:n.ug.TOP_RIGHT})})}),(0,p.jsx)(o.Z,{format:"24",step:s.step?Number(s.step):900,value:this.stringToDate(this.state.value),onChange:this.handleChange,overrides:h,creatable:!0,"aria-label":s.label})]})}}const h=m}}]);