"use strict";(globalThis.webpackChunk_stlite_desktop=globalThis.webpackChunk_stlite_desktop||[]).push([[2775],{53370:(t,e,i)=>{i.d(e,{Z:()=>d});i(5057);var s=i(46434),o=i(18950),r=i(45490);const n=i(21371).F4`
  50% {
    color: rgba(0, 0, 0, 0);
  }
`,a=(0,r.Z)("span",{target:"e1y2jo8h0"})((({includeDot:t,shouldBlink:e,theme:i})=>({...t?{"&::before":{opacity:1,content:'"\u2022"',animation:"none",color:i.colors.gray,margin:"0 5px"}}:{},...e?{color:i.colors.red,animationName:`${n}`,animationDuration:"0.5s",animationIterationCount:5}:{}})),"");var l=i(96266);const d=({dirty:t,value:e,maxLength:i,className:r,type:n="single"})=>{const d=[],h=(t,e=!1)=>{d.push((0,l.jsx)(a,{includeDot:d.length>0,shouldBlink:e,children:t},d.length))};return t&&("multiline"===n?(0,s.Ge)()?h("Press \u2318+Enter to apply"):h("Press Ctrl+Enter to apply"):"single"===n&&h("Press Enter to apply")),i&&("chat"!==n||t)&&h(`${e.length}/${i}`,t&&e.length>=i),(0,l.jsx)(o.X7,{"data-testid":"InputInstructions",className:r,children:d})}},52775:(t,e,i)=>{i.r(e),i.d(e,{default:()=>D});var s=i(5057),o=i(52707),r=i(84332),n=i(59500),a=i(98209),l=i(95870),d=i(98927),h=i(4337),c=i(89401),u=i(87509),p=i(30124),m=i(53370),g=i(18950),b=i(46434),f=i(45490);const y=(0,f.Z)("div",{target:"ellz0s83"})((({theme:t})=>({display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",borderWidth:"1px",borderStyle:"solid",borderColor:t.colors.widgetBorderColor||t.colors.widgetBackgroundColor||t.colors.bgColor,transitionDuration:"200ms",transitionProperty:"border",transitionTimingFunction:"cubic-bezier(0.2, 0.8, 0.4, 1)",borderRadius:t.radii.lg,overflow:"hidden","&.focused":{borderColor:t.colors.primary},input:{MozAppearance:"textfield","&::-webkit-inner-spin-button, &::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:t.spacing.none}}})),""),x=(0,f.Z)("div",{target:"ellz0s82"})({name:"76z9jo",styles:"display:flex;flex-direction:row;align-self:stretch"}),v=(0,f.Z)("button",{target:"ellz0s81"})((({theme:t})=>({margin:t.spacing.none,border:"none",height:t.sizes.full,display:"flex",alignItems:"center",width:"32px",justifyContent:"center",color:t.colors.bodyText,transition:"color 300ms, backgroundColor 300ms",backgroundColor:t.colors.widgetBackgroundColor||t.colors.secondaryBg,"&:hover:enabled, &:focus:enabled":{color:t.colors.white,backgroundColor:t.colors.primary,transition:"none",outline:"none"},"&:active":{outline:"none",border:"none"},"&:last-of-type":{borderTopRightRadius:t.radii.lg,borderBottomRightRadius:t.radii.lg},"&:disabled":{cursor:"not-allowed",color:t.colors.fadedText40}})),""),V=(0,f.Z)("div",{target:"ellz0s80"})((({theme:t})=>({position:"absolute",marginRight:t.spacing.twoXS,left:0,right:"64px"})),"");var w=i(96266);class C extends s.PureComponent{constructor(t){super(t),this.formClearHelper=new a.Kz,this.inputRef=s.createRef(),this.formatValue=t=>{const e=function(t){return null==t||""===t?void 0:t}(this.props.element.format);if(null==e)return t.toString();try{return(0,n.sprintf)(e,t)}catch(i){return(0,l.KE)(`Error in sprintf(${e}, ${t}): ${i}`),String(t)}},this.isIntData=()=>this.props.element.dataType===d.Y2.DataType.INT,this.getMin=()=>this.props.element.hasMin?this.props.element.min:-1/0,this.getMax=()=>this.props.element.hasMax?this.props.element.max:1/0,this.getStep=()=>{const{step:t}=this.props.element;return t||(this.isIntData()?1:.01)},this.commitWidgetValue=t=>{const{value:e}=this.state,{element:i,widgetMgr:s}=this.props,o=this.props.element,r=this.getMin(),n=this.getMax();if(r>e||e>n){const t=this.inputRef.current;t&&t.reportValidity()}else{const r=e||0===e?e:o.default;this.isIntData()?s.setIntValue(i,r,t):s.setDoubleValue(i,r,t),this.setState({dirty:!1,value:r,formattedValue:this.formatValue(r)})}},this.onFormCleared=()=>{this.setState(((t,e)=>({value:e.element.default})),(()=>this.commitWidgetValue({fromUi:!0})))},this.onBlur=()=>{this.state.dirty&&this.commitWidgetValue({fromUi:!0}),this.setState({isFocused:!1})},this.onFocus=()=>{this.setState({isFocused:!0})},this.onChange=t=>{const{value:e}=t.target;let i;i=this.isIntData()?parseInt(e,10):parseFloat(e),this.setState({dirty:!0,value:i,formattedValue:e})},this.onKeyDown=t=>{const{key:e}=t;switch(e){case"ArrowUp":t.preventDefault(),this.modifyValueUsingStep("increment")();break;case"ArrowDown":t.preventDefault(),this.modifyValueUsingStep("decrement")()}},this.onKeyPress=t=>{"Enter"===t.key&&this.state.dirty&&this.commitWidgetValue({fromUi:!0})},this.modifyValueUsingStep=t=>()=>{const{value:e}=this.state,i=this.getStep();switch(t){case"increment":this.canIncrement&&this.setState({dirty:!0,value:e+i},(()=>{this.commitWidgetValue({fromUi:!0})}));break;case"decrement":this.canDecrement&&this.setState({dirty:!0,value:e-i},(()=>{this.commitWidgetValue({fromUi:!0})}))}},this.state={dirty:!1,value:this.initialValue,formattedValue:this.formatValue(this.initialValue),isFocused:!1}}get initialValue(){const t=this.isIntData()?this.props.widgetMgr.getIntValue(this.props.element):this.props.widgetMgr.getDoubleValue(this.props.element);return void 0!==t?t:this.props.element.default}componentDidMount(){this.props.element.setValue?this.updateFromProtobuf():this.commitWidgetValue({fromUi:!1})}componentDidUpdate(){this.maybeUpdateFromProtobuf()}componentWillUnmount(){this.formClearHelper.disconnect()}maybeUpdateFromProtobuf(){const{setValue:t}=this.props.element;t&&this.updateFromProtobuf()}updateFromProtobuf(){const{value:t}=this.props.element;this.props.element.setValue=!1,this.setState({value:t,formattedValue:this.formatValue(t)},(()=>{this.commitWidgetValue({fromUi:!1})}))}get canDecrement(){return this.state.value-this.getStep()>=this.getMin()}get canIncrement(){return this.state.value+this.getStep()<=this.getMax()}render(){var t;const{element:e,width:i,disabled:s,widgetMgr:n}=this.props,{formattedValue:a,dirty:l,isFocused:d}=this.state,f={width:i},C=!this.canDecrement||s,D=!this.canIncrement||s;return this.formClearHelper.manageFormClearListener(n,e.formId,this.onFormCleared),(0,w.jsxs)("div",{className:"stNumberInput",style:f,children:[(0,w.jsx)(g.ON,{label:e.label,disabled:s,labelVisibility:(0,b.iF)(null===(t=e.labelVisibility)||void 0===t?void 0:t.value),children:e.help&&(0,w.jsx)(g.dT,{children:(0,w.jsx)(h.ZP,{content:e.help,placement:c.ug.TOP_RIGHT})})}),(0,w.jsxs)(y,{className:d?"focused":"",children:[(0,w.jsx)(p.Z,{type:"number",inputRef:this.inputRef,value:a,onBlur:this.onBlur,onFocus:this.onFocus,onChange:this.onChange,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,disabled:s,"aria-label":e.label,overrides:{Input:{props:{step:this.getStep(),min:this.getMin(),max:this.getMax()},style:{lineHeight:"1.4",paddingRight:".5rem",paddingLeft:".5rem",paddingBottom:".5rem",paddingTop:".5rem"}},InputContainer:{style:()=>({borderTopRightRadius:0,borderBottomRightRadius:0})},Root:{style:()=>({borderTopRightRadius:0,borderBottomRightRadius:0,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:0,borderBottomWidth:0})}}}),(0,w.jsxs)(x,{children:[(0,w.jsx)(v,{className:"step-down",onClick:this.modifyValueUsingStep("decrement"),disabled:C,children:(0,w.jsx)(u.ZP,{content:o.W,size:"xs",color:this.canDecrement?"inherit":"disabled"})}),(0,w.jsx)(v,{className:"step-up",onClick:this.modifyValueUsingStep("increment"),disabled:D,children:(0,w.jsx)(u.ZP,{content:r.v,size:"xs",color:this.canIncrement?"inherit":"disabled"})})]})]}),(0,w.jsx)(V,{children:(0,w.jsx)(m.Z,{dirty:l,value:a,className:"input-instructions"})})]})}}const D=C}}]);